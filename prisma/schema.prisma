generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

/// A job post obtained by web scraping
model Job {
  id              Int            @id @default(autoincrement())
  /// Job title. e.g., "Frontend JS Engineer"
  title           String
  /// Where did we find this job. e.g., "cryptocurrencyjobs.co"
  source          String
  /// The company that posted the job. e.g., "wintermute"
  company         String
  /// Tags for the job. e.g., ["javascript", "react", "typescript"]
  tags            String         @default("[]")
  /// When did the job post was published.
  date            DateTime
  /// The actual job description. Markdown formatted.
  job_description String
  /// The URL of the job post.
  job_url         String         @unique
  /// Whether the job is remote.
  is_remote       Boolean
  /// The ai generated analysis of the job.
  ai_analysis     JobAiAnalysis?
}

/// AI generated analysis of the job.
model JobAiAnalysis {
  id                      Int      @id @default(autoincrement())
  job_id                  Int      @unique
  /// ai generated job title from the job description
  job_title               String
  /// ai generated summary of the job
  summary                 String
  /// ai generated keywords for the job
  keywords                String
  /// whether ai think the job is remote or not
  is_remote               Boolean?
  /// is there indication that the job is focused on a specific country?
  country                 String?
  /// is there indication that the job is focused on a specific region?
  region                  String?
  /// ai generated is_full_time for the job
  is_full_time            Boolean?
  /// is there any indication if the job can pay in cryptocurrencies?
  option_to_pay_in_crypto Boolean?
  /// (range based) e.g., "100000-120000"
  compensation_amount     String?

  /// relation to the job obtained by scraping the web
  job Job @relation(fields: [job_id], references: [id])
}
